{"version":3,"sources":["views/login/index.module.scss","views/login/index.jsx"],"names":["module","exports","Index","state","form","formRef","React","createRef","handleFormSubmit","e","preventDefault","formData","FormData","current","username","get","password","sendLogin","Toast","show","message","position","a","params","api","login","status","data","localStorage","setItem","token","props","history","push","className","styles","container","ref","this","onSubmit","loginInfo","title","htmlFor","loginLabel","type","name","maxLength","id","loginInput","value","loginSubmit","Component"],"mappings":"kGACAA,EAAOC,QAAU,CAAC,UAAY,yBAAyB,UAAY,yBAAyB,MAAQ,qBAAqB,WAAa,0BAA0B,WAAa,0BAA0B,YAAc,6B,yLCIhMC,E,4MACjBC,MAAQ,CACJC,KAAM,I,EAEVC,QAAUC,IAAMC,Y,EAMhBC,iBAAmB,SAACC,GAAO,IAAD,EACtBA,EAAEC,iBAEF,IAAMC,EAAW,IAAIC,SAAJ,UAAa,EAAKP,eAAlB,aAAa,EAAcQ,SACtCC,EAAWH,EAASI,IAAI,YACxBC,EAAWL,EAASI,IAAI,YAEzBD,GAKOE,EAMR,EAAKC,UAAU,CACXH,WACAE,aAZJE,IAAMC,KAAK,CACPC,QAAS,uCACTC,SAAU,Y,EAetBJ,U,sBAAY,8CAAAK,EAAA,6DAAOC,EAAP,+BAAgB,GAAhB,SACuBC,IAAIC,MAAMF,GADjC,gBACAG,EADA,EACAA,OAAQC,EADR,EACQA,KAEZD,IACAE,aAAaC,QAAQ,QAArB,OAA8BF,QAA9B,IAA8BA,OAA9B,EAA8BA,EAAMG,OACpC,EAAKC,MAAMC,QAAQC,KAAK,MALpB,2C,oGAUR,OACI,0BAAMC,UAAWC,IAAOC,UAAWC,IAAKC,KAAKjC,QAASkC,SAAUD,KAAK9B,kBACrE,yBAAK0B,UAAWC,IAAOK,WACnB,uBAAGN,UAAWC,IAAOM,OAArB,gBAEA,2BAAOC,QAAQ,WAAWR,UAAWC,IAAOQ,YAA5C,sBACA,2BAAOC,KAAK,OAAOC,KAAK,WAAWC,UAAW,GAAIC,GAAG,WAAWb,UAAWC,IAAOa,aAElF,2BAAON,QAAQ,WAAWR,UAAWC,IAAOQ,YAA5C,gBACA,2BAAOC,KAAK,WAAWC,KAAK,WAAWE,GAAG,WAAWD,UAAW,GAAIZ,UAAWC,IAAOa,aACtF,2BAAOJ,KAAK,SAASK,MAAM,eAAKf,UAAWC,IAAOe,oB,GAvD/B5C,IAAM6C","file":"static/js/4.751d5eab.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"login_container__3vZYs\",\"loginInfo\":\"login_loginInfo__2Sdi0\",\"title\":\"login_title__35Of2\",\"loginLabel\":\"login_loginLabel__21DLs\",\"loginInput\":\"login_loginInput__ZAaZ-\",\"loginSubmit\":\"login_loginSubmit__2Q-SY\"};","import React from 'react';\nimport styles from './index.module.scss';\nimport { Toast } from '@/components/lib';\nimport api from '@/api';\n\nexport default class Index extends React.Component {\n    state = {\n        form: {}\n    };\n    formRef = React.createRef();\n\n    componentDidMount() {\n       \n    }\n\n    handleFormSubmit = (e) => {\n        e.preventDefault();\n\n        const formData = new FormData(this.formRef?.current);\n        const username = formData.get('username');\n        const password = formData.get('password');\n\n        if (!username) {\n            Toast.show({\n                message: '用户名不能空',\n                position: 'bottom'\n            });\n        } else if (!password) {\n            Toast.show({\n                message: '用户名不能空',\n                position: 'bottom'\n            });\n        } else {\n            this.sendLogin({\n                username,\n                password\n            });\n        }\n    }\n\n    sendLogin = async (params = {}) => {\n        const { status, data } = await api.login(params);\n\n        if (status) {\n            localStorage.setItem('token', data?.token);\n            this.props.history.push('/');\n        }\n    }\n\n    render() {\n        return (\n            <form className={styles.container} ref={this.formRef} onSubmit={this.handleFormSubmit}>\n            <div className={styles.loginInfo}>\n                <p className={styles.title}>登陆</p>\n               \n                <label htmlFor=\"username\" className={styles.loginLabel}>用户名</label>\n                <input type=\"text\" name=\"username\" maxLength={11} id=\"username\" className={styles.loginInput} />\n\n                <label htmlFor=\"password\" className={styles.loginLabel}>密码</label>\n                <input type=\"password\" name=\"password\" id='password' maxLength={20} className={styles.loginInput} />\n                <input type=\"submit\" value=\"提交\" className={styles.loginSubmit} />\n            </div>\n        </form>\n        )\n    }\n}"],"sourceRoot":""}