{"version":3,"sources":["views/reg/index.module.scss","utils/RegExp.js","views/reg/index.jsx"],"names":["module","exports","phone","password","Index","state","form","formRef","React","createRef","handleFormSubmit","e","preventDefault","formData","FormData","current","username","get","UtiPhone","test","UtiPassword","sendReg","Toast","show","message","position","a","params","api","reg","status","props","history","push","className","styles","container","ref","this","onSubmit","regInfo","title","htmlFor","regLabel","type","name","maxLength","id","regInput","value","regSubmit","Component","withRouter"],"mappings":"kGACAA,EAAOC,QAAU,CAAC,UAAY,uBAAuB,QAAU,qBAAqB,MAAQ,mBAAmB,SAAW,sBAAsB,SAAW,sBAAsB,UAAY,yB,gJCDhLC,EAAQ,SACRC,EAAW,+C,QCMlBC,E,4MACFC,MAAQ,CACJC,KAAM,I,EAEVC,QAAUC,IAAMC,Y,EAEhBC,iBAAmB,SAACC,GAAO,IAAD,EACtBA,EAAEC,iBAEF,IAAMC,EAAW,IAAIC,SAAJ,UAAa,EAAKP,eAAlB,aAAa,EAAcQ,SACtCC,EAAWH,EAASI,IAAI,YACxBf,EAAQW,EAASI,IAAI,SACrBd,EAAWU,EAASI,IAAI,YAEzBD,EAKOE,EAASC,KAAKjB,GAKdkB,EAAYD,KAAKhB,GAMzB,EAAKkB,QAAQ,CACTL,WACAd,QACAC,aARJmB,IAAMC,KAAK,CACPC,QAAS,uCACTC,SAAU,WAPdH,IAAMC,KAAK,CACPC,QAAS,6CACTC,SAAU,WAPdH,IAAMC,KAAK,CACPC,QAAS,6CACTC,SAAU,Y,EAqBtBJ,Q,sBAAU,0CAAAK,EAAA,6DAAOC,EAAP,+BAAgB,GAAhB,SACmBC,IAAIC,IAAIF,GAD3B,kBACEG,QAGJ,EAAKC,MAAMC,QAAQC,KAAK,UAJtB,2C,uDASN,OACI,0BAAMC,UAAWC,IAAOC,UAAWC,IAAKC,KAAK/B,QAASgC,SAAUD,KAAK5B,kBACjE,yBAAKwB,UAAWC,IAAOK,SACnB,uBAAGN,UAAWC,IAAOM,OAArB,gBACA,2BAAOC,QAAQ,WAAWR,UAAWC,IAAOQ,UAA5C,sBACA,2BAAOC,KAAK,OAAOC,KAAK,WAAWC,UAAW,GAAIC,GAAG,WAAWb,UAAWC,IAAOa,WAElF,2BAAON,QAAQ,QAAQR,UAAWC,IAAOQ,UAAzC,sBACA,2BAAOC,KAAK,OAAOC,KAAK,QAAQC,UAAW,GAAIC,GAAG,QAAQb,UAAWC,IAAOa,WAE5E,2BAAON,QAAQ,WAAWR,UAAWC,IAAOQ,UAA5C,gBACA,2BAAOC,KAAK,WAAWC,KAAK,WAAWE,GAAG,WAAWD,UAAW,GAAIZ,UAAWC,IAAOa,WACtF,2BAAOJ,KAAK,SAASK,MAAM,eAAKf,UAAWC,IAAOe,kB,GA3DlD1C,IAAM2C,WAkEXC,sBAAWhD","file":"static/js/5.51e9446a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"reg_container__1y5lU\",\"regInfo\":\"reg_regInfo__1rbh1\",\"title\":\"reg_title__2Kh-7\",\"regLabel\":\"reg_regLabel__spJrS\",\"regInput\":\"reg_regInput__NKebO\",\"regSubmit\":\"reg_regSubmit__1Zzbc\"};","export const phone = /\\d{11}/;\nexport const password = /^(?![0-9]+$)(?![a-zA-Z]+$)[a-zA-Z0-9]{6,12}$/;\n\n","import React from 'react';\nimport styles from './index.module.scss';\nimport { withRouter } from 'react-router-dom';\nimport { Toast } from '@/components/lib';\nimport { phone as UtiPhone, password as UtiPassword } from '@/utils/RegExp';\nimport api from '@/api';\n\nclass Index extends React.Component {\n    state = {\n        form: {}\n    };\n    formRef = React.createRef();\n\n    handleFormSubmit = (e) => {\n        e.preventDefault();\n\n        const formData = new FormData(this.formRef?.current);\n        const username = formData.get('username');\n        const phone = formData.get('phone');\n        const password = formData.get('password');\n\n        if (!username) {\n            Toast.show({\n                message: '用户名不能为空',\n                position: 'bottom'\n            });\n        } else if (!UtiPhone.test(phone)) {\n            Toast.show({\n                message: '手机号格式错误',\n                position: 'bottom'\n            });\n        } else if (!UtiPassword.test(password)) {\n            Toast.show({\n                message: '密码格式错误',\n                position: 'bottom'\n            });\n        } else {\n            this.sendReg({\n                username,\n                phone,\n                password\n            });\n        }\n    }\n\n    sendReg = async (params = {}) => {\n        const { status } = await api.reg(params);\n\n        if (status) {\n            this.props.history.push('/login');\n        }\n    }\n    \n    render() {\n        return (\n            <form className={styles.container} ref={this.formRef} onSubmit={this.handleFormSubmit}>\n                <div className={styles.regInfo}>\n                    <p className={styles.title}>注册</p>\n                    <label htmlFor=\"username\" className={styles.regLabel}>用户名</label>\n                    <input type=\"text\" name=\"username\" maxLength={20} id=\"username\" className={styles.regInput} />\n\n                    <label htmlFor=\"phone\" className={styles.regLabel}>手机号</label>\n                    <input type=\"text\" name=\"phone\" maxLength={11} id=\"phone\" className={styles.regInput} />\n\n                    <label htmlFor=\"password\" className={styles.regLabel}>密码</label>\n                    <input type=\"password\" name=\"password\" id='password' maxLength={20} className={styles.regInput} />\n                    <input type=\"submit\" value=\"提交\" className={styles.regSubmit} />\n                </div>\n            </form>\n        )\n    }\n}\n\nexport default withRouter(Index);"],"sourceRoot":""}